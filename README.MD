This is a [Next.js](https://nextjs.org/) project bootstrapped with [`create-next-app`](https://github.com/vercel/next.js/tree/canary/packages/create-next-app).

# Point App


## ğŸ–¥ Interface
### Front
- íšŒì›ê°€ì…, ë¡œê·¸ì¸
- Point ì¹´ë“œ ë“±ë¡, ì¡°íšŒ
- Point ì ë¦½, ì‚¬ìš© ë‚´ì—­ í™•ì¸, ì¡°íšŒ 
- Point ì‚¬ìš©ê°€ëŠ¥ì²˜ ì¡°íšŒ (Map)


### Backend
- íšŒì› ê´€ë¦¬(ë“±ë¡, ì‚­ì œ, ê¸°ë³¸ì •ë³´, í¬ì¸íŠ¸ ë‚´ì—­)
- Point ì¹´ë“œ ê´€ë¦¬(ë“±ë¡, ì‚­ì œ)
- ì‚¬ìš©ê°€ëŠ¥ì²˜ ë“±ë¡(Map)


## â³ History

### ğŸ“† May 28, 2024
MongDBì— ì—°ê²°í•˜ê³  ë°ì´í„°ë¥¼ POST, GET í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ.  
- API route ì˜ ê¸°ë³¸ì½”ë“œ
```javascript
const { MongoClient, ServerApiVersion } = require("mongodb");

// Replace the placeholder with your Atlas connection string
const uri = "<connection string>";

// Create a MongoClient with a MongoClientOptions object to set the Stable API version
const client = new MongoClient(uri,  {
        serverApi: {
            version: ServerApiVersion.v1,
            strict: true,
            deprecationErrors: true,
        }
    }
);

async function run() {
  try {
    // Connect the client to the server (optional starting in v4.7)
    await client.connect();

    // Send a ping to confirm a successful connection
    await client.db("admin").command({ ping: 1 });
    console.log("Pinged your deployment. You successfully connected to MongoDB!");
  } finally {
    // Ensures that the client will close when you finish/error
    await client.close();
  }
}
run().catch(console.dir);

```
[ì°¸ê³ ]  
- https://www.mongodb.com/ko-kr/docs/atlas/device-sdks/web/nextjs/
- https://www.mongodb.com/docs/drivers/node/current/fundamentals/connection/connect/#std-label-node-connect-to-mongodb
- https://ellertsmarik.medium.com/json-api-using-next-js-13-and-mongodb-f45e8e61b031

### ğŸ“† May 22, 2024
#### MongoDB ì„¸íŒ…
DBëŠ” ëª½ê³ ë””ë¹„ë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆë‹¤.  
ë“±ë¡, ì¡°íšŒ ì˜ ê¸°ëŠ¥ì´ ëŒ€ë¶€ë¶„ì´ë¼ ë¬´ë¦¬ ì—†ì–´ ë³´ì˜€ë‹¤.  
db,collectionì„ ìƒì„±
<img src="./public/mg-db-test.png" alt="" /> 


### ğŸ“† May 20, 2024
Express ë¡œ ë°±ì—”ë“œë¥¼ êµ¬ì„±.í–ˆì„ë•Œ  
í”„ë¡ íŠ¸ì™€ ë³„ê°œë¡œ ì„œë²„í˜¸ìŠ¤íŒ…ì„ êµ¬ì„±í•´ì•¼ í•œë‹¤  
vercel ë¡œ deploy í•˜ì—¬ production ìƒíƒœë¡œ ë§Œë“¤ì–´ì„œ ì˜¨ë¼ì¸ìœ¼ë¡œ ì ‘ì†í•´ ë³´ë©´ í”„ë¡ íŠ¸ëŠ” ì •ìƒì ìœ¼ë¡œ ë³´ì´ì§€ë§Œ  
API ë¥¼ í˜¸ì¶œí–ˆì„ë•Œ í†µì‹ ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤. ë°±ì—”ë“œ ë¦¬ì†ŒìŠ¤ë¥¼ ë³„ë„ë¡œ í˜¸ìŠ¤íŒ… í•˜ì—¬ í˜¸ì¶œí•´ì•¼ í•˜ëŠ” ê²ƒì´ë‹¤.  
- Next.js ë¡œ ê°œë°œí•˜ëŠ”ë° Express ë¡œ ë°±ì—”ë“œë¥¼ ë³„ë„ë¡œ êµ¬ì„±í•˜ê¸° ë³´ë‹¤ Next.js ì˜ [Route Handlers](https://nextjs.org/docs/app/building-your-application/routing/route-handlers) ë¡œ endpoint ë¥¼ ë§Œë“¤ë©´ ë˜ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.
- route êµ¬ì„±ì€ í”„ë¡ íŠ¸ì™€ ë™ì¼í•˜ë‹¤. /app/api/users/route.ts ëŠ” /api/users ë¼ëŠ” endpoint ë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤.
- /app/api/users/route.ts ì— í˜¸ì¶œì‹œ ë°˜í™˜ë˜ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì‘ì„±í•´ ì£¼ë©´ ëœë‹¤.
- GET, POST ë¼ëŠ” í•¨ìˆ˜ëª…ì´ ê·¸ëŒ€ë¡œ ê·¸ ì—­í™œì„ ìˆ˜í–‰í•´ ì¤€ë‹¤.  

```javascript
// /app/api/users/route.ts
import {NextRequest, NextResponse} from "next/server";

export async function GET(req: NextRequest) {
    return NextResponse.json({
        name: "Jintae Kim",
        email: "vuenos@gmail.com",
        isAdmin: true,
    })
}

// /app/page.tsx
const callDataHandler = async () => {
    try {
      const { data, status } = await axios.get(`${url}/test`);

      if (status === 200) {
        setUserData(data);
        setCallStatus("suceess");
        setMsg(`ì„œë²„ì—ì„œ ì •ìƒì ìœ¼ë¡œ ì‘ë‹µí•¨`);
      }
    } catch(error: any) {
      console.log(error.message)
      setCallStatus("failed");
      setMsg(`ì„œë²„ í†µì‹  ì‹¤íŒ¨`);
    };
  };
```
    

í”„ë¡ íŠ¸ì—ì„œì˜ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.  
    
<img src="./public/fetch-result.png" alt="" />

***

### ğŸ“† May 18, 2024
í—¤ë”ì˜ ê³µí†µ ë„¤ë¹„ê²Œì´ì…˜ì—ì„œ í˜„ì¬ ë©”ë‰´ì˜ í™œì„±í™” ìŠ¤íƒ€ì¼ ì ìš©  
React ì—ì„œëŠ” NavLink ë¥¼ ì´ìš©í•˜ë©´ ì‰½ê²Œ ì ìš©ì´ ë˜ì§€ë§Œ Next.js ì—ì„œëŠ” ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.  
ê·¸ë˜ì„œ ì»¤ìŠ¤í…€ì„ í•´ì•¼ í•œë‹¤.
- 1ì°¨ ë°©ë²• : next/router ì˜ useRouter ë¥¼ ì´ìš©í•´ì„œ í˜„ì¬í˜ì´ì§€ì˜ pathname ì„ íŠ¹ì •í•´ì„œ ë¹„êµí•˜ëŠ” ë°©ë²•
- ë¨¼ì € ë©”ë‰´ì˜ ì •ë³´ì— ëŒ€í•œ ê°ì²´ ë°°ì—´ì„ ë§Œë“¤ì–´ ì£¼ê³ , 
```javascript
const menuData = [
    { id: "menu01", title: `${userName}`, path: "/member/mypage" },
    { id: "menu02", title: "Login", path: "/member/login" },
    { id: "menu03", title: "Sign up", path: "/member/join" },
];
```
- path ê°’ê³¼ í˜„ì¬ pathname ì„ ë¹„êµí•˜ì—¬ íŠ¹ì • ìŠ¤íƒ€ì¼ì„ ì ìš©í•œë‹¤.
```javascript
const router = useRouter();

{menuData.map((menuItem) => (
    <Link
        href={menuItem.path}
        className={`${menuItem.path === router.pathname ? "active" : ""}`}
    >
        {menuItem.title}
    </Link>
))}
```
ê·¸ëŸ°ë° ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ëœ¬ë‹¤.  
<span style="color: red">Error: NextRouter was not mounted.</span>  
Next.js 13 ë¶€í„°ëŠ” next/router ëŒ€ì‹  next/navigation ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
```javascript
// refactor
import { usePathname } from "next/navigation";

const pathname = usePathname();

{menuData.map((menuItem) => (
    <Link
        href={menuItem.path}
        className={`${menuItem.path === pathname ? "active" : ""}`}
    >
        {menuItem.title}
    </Link>
))}
```  
ì°¸ê³  : https://nextjs.org/docs/app/api-reference/functions/use-router  

***  

 
### ğŸ“† May 16, 2024
#### Next.js App Router
Next.js 13 ë¶€í„° app/ ë””ë ‰í† ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¼ìš°íŒ…ì´ êµ¬ì„±ëœë‹¤.  
app/about ì´ë€ dir ë¥¼ ë§Œë“¤ê³  page.tsx ë¥¼ ìƒì„±í•˜ë©´ /about ì´ë€ route ê°€ êµ¬ì„±ì´ ë˜ëŠ” ê²ƒì´ë‹¤.  
Layout.tsx ë¡œ ë ˆì´ì•„ì›ƒì„ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤. /app/page.tsx ê°€ "/" ì´ë€ route ê°€ ëœë‹¤.  
Layout ì€ ì—¬ëŸ¬ ê²½ë¡œ ê°„ì— ê³µìœ ë˜ëŠ” UI ì´ë‹¤. Route ê°„ì˜ ì´ë™ ì‹œ ë ˆì´ì•„ì›ƒ ìƒíƒœë¥¼ ìœ ì§€í•˜ê³  ìƒí˜¸êµí™˜ ìƒíƒœë¥¼ ìœ ì§€í•˜ë©° ë¦¬ë Œë”ë§ ë˜ì§€ ì•ŠëŠ”ë‹¤.  
<img src="https://nextjs.org/_next/image?url=%2Fdocs%2Flight%2Flayout-special-file.png&w=3840&q=75" width="600">
```javascript
// app/layout.js
export default function RootLayout({
   children,
}: Readonly<{
    children: React.ReactNode;
}>) {
    return (
        <html lang="ko">
            <body>
                <Header />
                <Wrapper>{children}</Wrapper>
                <Footer />
            </body>
        </html>
    );
}

// app/page.js
export default function Page() {
  return <h1>Hello, World</h1>;
}
```
- /app/member/login/page.tsx : /member/login
- ì°¸ê³  : https://nextjs.org/docs/app/building-your-application/routing/layouts-and-templates

***  

### ğŸ“† May 13, 2024
- User ë°ì´í„° ëª¨ë¸ ìƒì„±
- /server/ ë‚´ì— routes, models, controller ë¥¼ ìƒì„±í•œë‹¤.
- routes/userRoutes.js ì— ë°±ì—”ë“œì—ì„œ ìš”ì²­ë°›ì„ routes ë¥¼ ì •ì˜í•œë‹¤.
```javascript
const router = express.Router();

router.route("/")
    .post(registerUser)
    .get(protect, admin)

router
    .post("/login", authUser)

router
    .route('/profile')
    .get(protect, getUserProfile)
    .put(protect, updateUserProfile)

router
    .route('/:id')
    .delete(protect, admin, deleteUser)
    .get(protect, admin, getUserById)
    .put(protect, admin, updateUser)
```
- models/userModel.js ì—ì„œ ìœ ì €ë°ì´í„° schema ë¥¼ êµ¬ì„±í•¨. 
```javascript
const userSchema = mongoose.Schema(
    {
        name: {
            type: String,
            required: true,
        },
        email: {
            type: String,
            required: true,
            unique: true,
        },
        password: {
            type: String,
            required: true,
        },
        isAdmin: {
            type: String,
            required: true,
            default: false,
        },
    },
    {
        timestamps: true,
    }
);

const User = mongoose.model("User", userSchema);

export default User;
// User model ì„ User ë¡œ ì •ì˜í•´ì„œ ë‚´ë³´ë‚¸ë‹¤
```
- controller/userController.js : registerUser í•¸ë“¤ëŸ¬ë¥¼ í†µí•´ userModel ì—ì„œ ê°€ì ¸ì˜¨ User ëª¨ë¸ì— ë§ì¶”ì–´ ì…ë ¥ë°›ì€ ìœ ì €ë°ì´í„°ë¥¼ ìƒì„±í•œë‹¤.
```javascript
const registerUser = asyncHandler(async (req, res) => {
    const { name, email, isAdmin, password } = req.body

    const userExists = await User.findOne({ email })

    if (userExists) {
        res.status(400)
        throw new Error('User already exists')
    }

    const user = await User.create({
        name,
        email,
        isAdmin,
        password,
    })

    if (user) {
        res.status(201).json({
            _id: user._id,
            name: user.name,
            email: user.email,
            isAdmin: user.isAdmin,
            token: generateToken(user._id),
        })
    } else {
        res.status(400)
        throw new Error('Invalid user data')
    }
});
```

***  

### ğŸ“† May 10, 2024
- ì„œë²„ìš”ì²­ ë°©ì‹ì„ async ë¡œ ë³€ê²½
- ì„œë²„ì‘ë‹µìƒíƒœì— ë”°ë¼ ì»¤ìŠ¤í…€ ë©”ì‹œì§€ ì ìš©
```javascript
const callDataHandler = async () => {
    try {
        const { data, status } = await axios.get("http://localhost:5500/getdata");

        if (status === 200) {
        console.log(data);
        setMsg(data);
        setCallStatus("suceess");
        }
    } catch(error: any) {
        console.log(error);
        setMsg("ì„œë²„ í†µì‹ ì„ ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.");
        setCallStatus("failed");
    };
};

<div>
    {msg && (callStatus === "suceess") ? <CallStackSuccess /> 
        : (callStatus === "failed") ? <CallStackFailed />
        : null
    }
</div>
```

***
  

### ğŸ“† May 8, 2024
- ë°±ì—”ë“œ í˜¸ì¶œ í…ŒìŠ¤íŠ¸
- ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬ (callDataHandler) ë²„íŠ¼ì„ í†µí•´ì„œ ì„œë²„ìš”ì²­ì„ í…ŒìŠ¤íŠ¸

```javascript
// server.js ì¶”ê°€
server.get("/getdata", (req, res) => {
    res.send(`PORT: ${port} ì„œë²„ì—ì„œ ì •ìƒì ìœ¼ë¡œ ì‘ë‹µí•¨`);
});

//page.tsx
// ì„œë²„ í˜¸ì¶œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì¶”ê°€
const callDataHandler = () => {
    axios.get("http://localhost:5500/getdata").then((res) => {
        console.log(res.data);
        setMsg(res.data);
    }).catch((error) => {
        console.log(error.message);
        setMsg(error.message);
    });
};


<button onClick={callDataHandler}>ë°ì´í„° ìš”ì²­</button>
```

ì„œë²„ ì‘ë‹µ ì„±ê³µ, ì‹¤íŒ¨
<img src="./public/ss-1.png" width="200" />
<img src="./public/ss-2.png" width="200" />

***

### ğŸ“† May 7, 2024
- í”„ë¡ íŠ¸, ë°±ì—”ë“œë¥¼ ê°™ì´ ê°™ì´ êµ¬ì„±í•˜ê¸°ë¡œ í•¨.
- src/server/ ì•ˆì— ì„œë²„ êµ¬ë™ì„ ìœ„í•œ íŒŒì¼ ìƒì„± (server.js)
- í”„ë¡ íŠ¸ port 3000, ë°±ì—”ë“œ port 5500
```javascript
//server.js
import express from "express";
import next from "next";

const dev = process.env.NODE_ENV !== "development";
const port = process.env.PORT || 5500;

const app = next({ dev, port });

const handle = app.getRequestHandler();

const isDate = new Date();

app.prepare().then(() => {
    const server = express();

    server.get("/", (req, res) => {
        res.send(
            `Running SERVER... ${isDate}`
        );
    });

    server.all("*", (req, res) => {
        return handle(req, res);
    });

    server.listen(port, () => {
        console.log(
            `Server running is ${process.env.NODE_ENV} mode on port ${port}`
        );
    });
});
```

- pscksge.json ìˆ˜ì •
```json
"scripts": {    
    "server": "nodemon src/server/server",
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
```
ì‹¤í–‰

```bash
npm run server

npm run dev
```

- ë¸Œë¼ìš°ì €ì—ì„œ [localhost:3000](http://localhost:3000), [localhost:5500](http://localhost:5500) ì„ ì—´ì–´ì„œ í™•ì¸

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```


```

point_app
â”œâ”€ public
â”‚  â”œâ”€ next.svg
â”‚  â””â”€ vercel.svg
â”œâ”€ src
â”‚  â”œâ”€ app
â”‚  â”‚  â”œâ”€ favicon.ico
â”‚  â”‚  â”œâ”€ globals.css
â”‚  â”‚  â”œâ”€ layout.tsx
â”‚  â”‚  â”œâ”€ page.module.css
â”‚  â”‚  â””â”€ page.tsx
â”‚  â””â”€ server
â”‚     â””â”€ server.js

```
